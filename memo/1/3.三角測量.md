# 三角測量

## Value Objectパターン

ValueObjectパターン: オブジェクトを値として使う。コンストラクタで設定したインスタンス変数の値が変わってはならないという制約がある。

今回のDollarオブジェクトもValueObjectパターンと呼ばれる。

大きなメリットは、別名参照を気にする必要がなくなること。

*オブジェクトがValueObjectであるためには、操作は新しいオブジェクトを返さなければならない。また、equalsメソッド実装しなければならない。*


## TODOリスト

- [ ] $5+10CHF=$10(レートが 2:1 の場合)
- [x] $5 * 2=$10
- [ ] amountをprivateにする
- [x] Dollarの副作用どうする？
- [ ] Moneyの丸め処理どうする？
- [x] equals()
- [ ] hashCode()
- [ ] nullとの等価性比較
- [ ] 他のオブジェクトの等価性比較


実装しないといけないことが出ても、実装の方に気を取られず、等価性のテストを考える。
5ドルは5ドルと等価でなければならない。


## 三角測量

- 最も慎重な実相戦略
- テストコードとプロダクトコードの間の重複無視してよいものとする。


## やったこと

- ValueObjectパターンを満たす条件がわかった
- その条件を満たすテストを書いた
- シンプルな実装
- すぐにリファクタリングするのではなく、もう一個テストを書いた
- 2つのテストをクリアするリファクタリングを行った
