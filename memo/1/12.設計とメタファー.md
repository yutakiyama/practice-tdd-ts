# 設計とメタファー

## TODO リスト

- [ ] $5+10CHF=$10(レートが 2:1 の場合)
- [ ] $5 + $5 = $10

足し算的な最終的なストーリーを描けていないので、TODO に追加。

通貨間の為替レートを扱えて、かつ計算は計算のように見える方法を模索したい。オブジェクトたちに頼ろう。Imposter パターン。

*自信を与えてくれるテストときちんと手入れされたコードはひらめきへの備えであり、ひらめいたときに、それを具現化するための備えでもある。*

Money のように振る舞うが、2 つの合計を表現するようなオブジェクトをこれからつくる。様々な通貨がはいった財布のイメージ。

「式」というメタファー。四季とは例えば`(2 + 3) * 5`のようなもので、今回は`($2 + 3CHF) * 5`など。式メタファーにおいて、
Money とは式の最小構成要素であり、さまざまな操作の結果は Expression オブジェクトの形になる。

reducedについてBankに任せることにしたのは、通貨を換算するのは式ではなく銀行の責務であるべきだから。

## やったこと

- 大きいテストを分解、進み具合がわかるテスト（シンプルな足し算）を追加
- 計算のためのメタファーを考えた
- 新しいメタファーを使って書き直し
- 仮実装でコンパイルが通りテストを通した
