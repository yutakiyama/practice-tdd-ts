# テスト不足に気づいたら

## TODO リスト

- [ ] $5+10CHF=$10(レートが 2:1 の場合)
- [x] $5 \* 2=$10
- [x] amount を private にする
- [x] Dollar の副作用どうする？
- [ ] Money の丸め処理どうする？
- [x] equals()
- [ ] hashCode()
- [ ] null との等価性比較
- [ ] 他のオブジェクトの等価性比較
- [x] 5CHF \* 2 = 10CHF
- [ ] Dollar と Franc の重複
- [ ] equals の一般化
- [ ] times の一般化

一個前の章ではクラスをコピペすることでテストを通した。
そのコピペコードをキレイにする段階。
(案 1) 片方のクラスがもう片方を継承する。
-> これは全くコードの削減につながらなかった。
(案 2) 2 つのクラスの共通親クラスを作成する。
-> 時間かかるけどうまくいきそう。

やっているうちに Franc には等価性比較のテストしていないことに気づく。書く。

テストが十分じゃない場合、テストによって守られていないリファクタリングを行わざるを得なくなる。
_リファクタリング中にミスが有っても通り続けるかもしれない。_
どうするべきか？
-> あればよかっと思うテストを書く。書かなければリファクタリングの過程でいつか壊れる。
リファクタリングがないと設計はくさっていく。

とりあえずコピペでフラン用のテストを追加することで、フランも継承できる。

## やったこと

- Dollar から Money へ段階的にメソッド移動
- Franc もサブクラス化
- equlas メソッドの差異をなくしてサブクラス側の実装を削除

## TODO リスト

- [ ] $5+10CHF=$10(レートが 2:1 の場合)
- [x] $5 \* 2=$10
- [x] amount を private にする
- [x] Dollar の副作用どうする？
- [ ] Money の丸め処理どうする？
- [x] equals()
- [ ] hashCode()
- [ ] null との等価性比較
- [ ] 他のオブジェクトの等価性比較
- [x] 5CHF \* 2 = 10CHF
- [ ] Dollar と Franc の重複
- [x] equals の一般化
- [ ] times の一般化
- [ ] Dollar と Franc を比較する
