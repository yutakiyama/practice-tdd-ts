# テスト不足に気づいたら

## TODOリスト

- [ ] $5+10CHF=$10(レートが 2:1 の場合)
- [x] $5 * 2=$10
- [x] amountをprivateにする
- [x] Dollarの副作用どうする？
- [ ] Moneyの丸め処理どうする？
- [x] equals()
- [ ] hashCode()
- [ ] nullとの等価性比較
- [ ] 他のオブジェクトの等価性比較
- [x] 5CHF * 2 = 10CHF
- [ ] DollarとFrancの重複
- [ ] equalsの一般化
- [ ] timesの一般化

一個前の章ではクラスをコピペすることでテストを通した。
そのコピペコードをキレイにする段階。
(案1) 片方のクラスがもう片方を継承する。
-> これは全くコードの削減につながらなかった。
(案2) 2つのクラスの共通親クラスを作成する。
-> 時間かかるけどうまくいきそう。

やっているうちにFrancには等価性比較のテストしていないことに気づく。書く。

テストが十分じゃない場合、テストによって守られていないリファクタリングを行わざるを得なくなる。
*リファクタリング中にミスが有っても通り続けるかもしれない。*
どうするべきか？
-> あればよかっと思うテストを書く。書かなければリファクタリングの過程でいつか壊れる。
リファクタリングがないと設計はくさっていく。

とりあえずコピペでフラン用のテストを追加することで、フランも継承できる。

## やったこと

- DollarからMoneyへ段階的にメソッド移動
- Francもサブクラス化
- equlasメソッドの差異をなくしてサブクラス側の実装を削除


## TODOリスト

- [ ] $5+10CHF=$10(レートが 2:1 の場合)
- [x] $5 * 2=$10
- [x] amountをprivateにする
- [x] Dollarの副作用どうする？
- [ ] Moneyの丸め処理どうする？
- [x] equals()
- [ ] hashCode()
- [ ] nullとの等価性比較
- [ ] 他のオブジェクトの等価性比較
- [x] 5CHF * 2 = 10CHF
- [ ] DollarとFrancの重複
- [x] equalsの一般化
- [ ] timesの一般化
- [ ] DollarとFrancを比較する
